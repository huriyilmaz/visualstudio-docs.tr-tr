---
title: 'CA2124: Savunmasız sonunda yan tümcelerini dış deneme içine sarmalayın'
description: Uygulamanın 1.0 ve 1.1 sürümlerinde genel .NET Framework korumalı bir yöntem try/catch/finally bloğu içerir. Finally bloğu, güvenlik durumunu sıfırlamak için görünür ve finally bloğu içine ekli değildir.
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA2124
- WrapVulnerableFinallyClausesInOuterTry
helpviewer_keywords:
- CA2124
- WrapVulnerableFinallyClausesInOuterTry
ms.assetid: 82efd224-9e60-4b88-a0f5-dfabcc49a254
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.technology: vs-ide-code-analysis
ms.workload:
- multiple
ms.openlocfilehash: 9531f3579fd0ccf83563cb667bca51a6bfc3c4c35d0834e6ffb8340f07dcf606
ms.sourcegitcommit: c72b2f603e1eb3a4157f00926df2e263831ea472
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/12/2021
ms.locfileid: "121405870"
---
# <a name="ca2124-wrap-vulnerable-finally-clauses-in-outer-try"></a>CA2124: Savunmasız sonunda yan tümcelerini dış deneme içine sarmalayın

|Öğe|Değer|
|-|-|
|RuleId|CA2124|
|Kategori|Microsoft.Security|
|Yeni değişiklik|Kesilmeyen|

## <a name="cause"></a>Nedeni
Genel veya korumalı bir yöntem, .NET Framework 1.0 ve 1.1 sürümlerinde bir blok `try` / `catch` / `finally` içerir. Blok, `finally` güvenlik durumunu sıfırlar gibi görünür ve bir bloğun içine `finally` değildir.

> [!NOTE]
> Bu kural kullanım dışıdır. Daha fazla bilgi için [bkz. Kullanım dışı kurallar.](fxcop-unported-deprecated-rules.md)

## <a name="rule-description"></a>Kural açıklaması
Bu kural, kodda uygulamanın `try` / 1.0 ve 1.1 sürümlerini .NET Framework yığında mevcut kötü amaçlı özel durum filtrelerine karşı savunmasız durumda olan `finally` blokları bulur. Kimliğe bürünme gibi hassas işlemler deneme bloğunda gerçekleşirse ve bir özel durum oluşursa, filtre bloktan önce `finally` yürütülür. Kimliğe bürünme örneğinde bu, filtrenin kimliğine bürünülen kullanıcı olarak yürütülmek anlamına gelir. Filtreler şu anda yalnızca Visual Basic.

> [!NOTE]
> .NET Framework 2.0 ve sonraki sürümlerinde, sıfırlama doğrudan özel durum bloğu içeren yöntemin içinde gerçekleşirse çalışma zamanı kötü amaçlı özel durum filtrelerinden bir `try` / `catch` /  `finally` bloğu otomatik olarak korur.

## <a name="how-to-fix-violations"></a>İhlalleri düzeltme
Sarmalanmamış bir try `try` / `finally` bloğuna yer. Aşağıdaki ikinci örneğine bakın. Bu, filtre `finally` kodu öncesinde yürütmeye güç sağlar.

## <a name="when-to-suppress-warnings"></a>Uyarıların ne zaman gizlenmeleri
Bu kuraldan uyarıyı bastırmayın.

## <a name="pseudo-code-example"></a>Sahte kod örneği

### <a name="description"></a>Açıklama

Aşağıdaki sahte kod, bu kural tarafından algılanan deseni göstermektedir.

```csharp
try {
   // Do some work.
   Impersonator imp = new Impersonator("John Doe");
   imp.AddToCreditCardBalance(100);
}
finally {
   // Reset security state.
   imp.Revert();
}
```

Aşağıdaki sahte kod, kodunuzu korumak ve bu kuralı karşılamak için kullanabileceğiniz deseni gösterir.

```csharp
try {
     try {
        // Do some work.
     }
     finally {
        // Reset security state.
     }
}
catch()
{
    throw;
}
```
