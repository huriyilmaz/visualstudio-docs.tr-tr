---
title: 'CA1901: P-Invoke bildirimleri taşınabilir olmalıdır'
description: Bu kural, her parametrenin boyutunu ve bir P/Invoke dönüş değerini değerlendirir ve 32 bit ve 64 bit platformlarda yönetlanmamış koda sıralandırıldıklarında boyutlarının doğru olduğunu doğrular.
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1901
- PInvokeDeclarationsShouldBePortable
helpviewer_keywords:
- CA1901
- PInvokeDeclarationsShouldBePortable
ms.assetid: 90361812-55ca-47f7-bce9-b8775d3b8803
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.technology: vs-ide-code-analysis
ms.workload:
- multiple
ms.openlocfilehash: 806ef78830d67b99e7bc33b6834fb65d11fb2e3a
ms.sourcegitcommit: 68897da7d74c31ae1ebf5d47c7b5ddc9b108265b
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 08/13/2021
ms.locfileid: "122098209"
---
# <a name="ca1901-pinvoke-declarations-should-be-portable"></a>CA1901: P/Invoke bildirimleri taşınabilir olmalıdır

|Öğe|Değer|
|-|-|
|RuleId|CA1901|
|Kategori|Microsoft.Portability|
|Yeni değişiklik|Breaking - P/Invoke derlemenin dışında görünüyorsa. Kesilmeyen - P/Invoke derlemenin dışında görünmüyorsa.|

## <a name="cause"></a>Nedeni
Bu kural, her parametrenin boyutunu ve bir P/Invoke dönüş değerini değerlendirir ve 32 bit ve 64 bit platformlarda yönetlanmamış koda sıralandırıldıklarında boyutlarının doğru olduğunu doğrular. Bu kuralın en yaygın ihlali, platforma bağımlı, işaretçi boyutlu bir değişkenin gerekli olduğu sabit boyutlu bir tamsayıyı geçmektir.

## <a name="rule-description"></a>Kural açıklaması
Aşağıdaki senaryolardan biri bu kuralı ihlal ediyor:

- Dönüş değeri veya parametresi, olarak yazıldıklarına sabit boyutlu bir tamsayı olarak `IntPtr` yazıldı.

- Dönüş değeri veya parametresi, sabit `IntPtr` boyutlu bir tamsayı olarak yazarak bir olarak yazıldı.

## <a name="how-to-fix-violations"></a>İhlalleri düzeltme
veya yerine tanıtıcıları temsil etmek `IntPtr` için veya kullanarak bu ihlali `UIntPtr` `Int32` `UInt32` düzeltin.

## <a name="when-to-suppress-warnings"></a>Uyarıların ne zaman gizlenmeleri
Bu uyarıyı gizlememeli.

## <a name="example"></a>Örnek
Aşağıdaki örnekte, bu kuralın ihlali gösterildi.

```csharp
internal class NativeMethods
{
    [DllImport("shell32.dll", CharSet=CharSet.Auto)]
    internal static extern IntPtr ExtractIcon(IntPtr hInst,
        string lpszExeFileName, IntPtr nIconIndex);
}
```

Bu örnekte parametresi, 32 bitlik bir platformda 4 bayt genişliğinde ve `nIconIndex` 64 bit platformda 8 bayt genişliğinde olan bir olarak `IntPtr` bildirildi. Aşağıdaki unmanaged bildiriminde, bunun tüm platformlarda `nIconIndex` 4 bitlik bir imzasız tamsayı olduğunu görüyorsunuz.

```csharp
HICON ExtractIcon(HINSTANCE hInst, LPCTSTR lpszExeFileName,
    UINT nIconIndex);
```

İhlali düzeltmek için bildirimini aşağıdakiyle değiştirebilirsiniz:

```csharp
internal class NativeMethods{
    [DllImport("shell32.dll", CharSet=CharSet.Auto)]
    internal static extern IntPtr ExtractIcon(IntPtr hInst,
        string lpszExeFileName, uint nIconIndex);
}
```
